import loader from"@assemblyscript/loader";async function wasm_init(e,l,c,o){var s=()=>new Promise((r,n)=>{const t=new Worker(`${o??""}/assets/web-worker/wasm/worker.js`);t.postMessage(JSON.stringify(e));const a=async e=>{t.removeEventListener("message",a);let o;var s={...l?{env:{memory:l}}:{},console:{"console.log":e=>{o&&console.log(o.__getString(e))},"console.logi":e=>{console.log(e)},"console.logf":e=>{console.log(e)},"console.logj":e=>{try{o&&console.log(JSON.parse(o.__getString(e)))}catch(e){console.error(e)}}},...c};try{o=(await loader.instantiate(e.data[1],s)).exports,r(o)}catch(e){console.error(e),n()}};t.addEventListener("message",a)});return Array.isArray(e)?Promise.all(e.map(s)):s()}export{wasm_init};